function accAdd(t,e){var r,n,a;try{r=t.toString().split(".")[1].length}catch(t){r=0}try{n=e.toString().split(".")[1].length}catch(t){n=0}return a=Math.pow(10,Math.max(r,n)),(t*a+e*a)/a}function accMul(t,e){var r=0,n=t.toString(),a=e.toString();try{r+=n.split(".")[1].length}catch(t){}try{r+=a.split(".")[1].length}catch(t){}return Number(n.replace(".",""))*Number(a.replace(".",""))/Math.pow(10,r)}function accDiv(arg1,arg2){var t1=0,t2=0,r1,r2;try{t1=arg1.toString().split(".")[1].length}catch(t){}try{t2=arg2.toString().split(".")[1].length}catch(t){}with(Math)return r1=Number(arg1.toString().replace(".","")),r2=Number(arg2.toString().replace(".","")),r1/r2*pow(10,t2-t1)}Array.prototype.insert=function(t,e){this.splice(t,0,e)},Array.prototype.remove=function(t,e){var r=this.slice((e||t)+1||this.length);return this.length=t<0?this.length+t:t,this.push.apply(this,r)};var output=[],initial="0",result="",temValue=[0,0],spValue=0,flag=0,sign="",screen,capture=function(){var t=this.value;screenOutput(t),stock(t)},clear=function(){temValue=[0,0],sign="",flag=0},clearButton=function(){clear(),result="",spValue=0,output=[],screen.innerHTML=initial};window.onload=function(){screen=document.getElementById("screen-output"),screen.innerHTML=initial;for(var t=document.getElementsByTagName("button"),e=1;e<t.length;e++)2!=e&&("Microsoft Internet Explorer"==navigator.appName?t[e].onclick=capture:t[e].addEventListener("click",capture,!1));"Microsoft Internet Explorer"==navigator.appName?t[2].onclick=clearButton:t[2].addEventListener("click",clearButton,!1)};var screenOutput=function(t){if(isNaN(t)&&"."!=t){if("back"==t)if(0!=output.length&&1!=output.length){output.remove(-1);var e=output.join("");screen.innerHTML=e}else 1==output.length?(output.remove(-1),screen.innerHTML=initial):screen.innerHTML=initial}else{if("."==t)for(var r=0;r<output.length;r++)if(t==output[r])return;output.push(t);var e=output.join("");isNaN(parseFloat(e))?(output.insert(0,"0"),e=output.join(""),screen.innerHTML=e):/^0?0$/.test(e)&&!/0.0+/.test(e)?output=[output[0]]:"0."==e||/0.0+/.test(e)?screen.innerHTML=e:screen.innerHTML=String(parseFloat(e))}},stock=function(t){"+"==t||"-"==t||"/"==t||"*"==t||"="==t?(0!=output.length?temValue[flag]=parseFloat(output.join("")):0!=result.length?(temValue[0]=result,flag=1):temValue[flag]=initial,result=compute(sign,temValue[0],temValue[1]),temValue[0]=result,"="!=t?(sign=t,flag=1):clear(),screen.innerHTML=String(result),output=[]):"sin"!=t&&"cos"!=t&&"tan"!=t&&"sqrt"!=t&&"part"!=t&&"neg"!=t&&"%"!=t||(spValue=0!=output.length?parseFloat(output.join("")):0!=result.length?result:initial,sign=t,result=compute(sign,spValue),screen.innerHTML=String(result),sign="",output=[])},compute=function(t,e,r){var n;switch(t){case"+":n=accAdd(e,r);break;case"-":n=e-r;break;case"*":n=accMul(e,r);break;case"/":if(0==r){n="error",alert("除数不能为0！");break}n=accDiv(e,r);break;case"sin":n=Math.sin(2*Math.PI/360*e);break;case"cos":n=Math.cos(2*Math.PI/360*e);break;case"tan":n=Math.tan(2*Math.PI/360*e);break;case"part":if(0==e){n="error",alert("除数不能为0！");break}n=1/e;break;case"%":n=e/100;break;case"neg":n=-e;break;case"sqrt":if(e<0){n="error",alert("负数无法进行根号运算！");break}n=Math.sqrt(e);break;default:n=e}return parseFloat(n.toFixed(5))};